{"version":3,"sources":["components/ThreeJSComponents/textures/land/pallete.png","components/ThreeJSComponents/Explosion/shaderMaterial.ts","utils/zustandStore.ts","components/ThreeJSComponents/Explosion/Model.tsx","components/ThreeJSComponents/stars.tsx","components/ThreeJSComponents/MainCamera.tsx","components/ThreeJSComponents/Landscape/shaders/mainShader.ts","components/ThreeJSComponents/Landscape/Land.tsx","components/ThreeJSComponents/Landscape/shaders/SkyShader.ts","components/ThreeJSComponents/Landscape/LandscapeSky.tsx","components/ThreeJSComponents/StarSystem/NewSun.tsx","components/ThreeJSComponents/TransitionsBetweenScenes.tsx","components/ThreeJSComponents/InitialCanvas.tsx","components/HTMLComponents/NavMenu/Navigation.jsx","components/HTMLComponents/NavMenu/Header.jsx","components/HTMLComponents/test.tsx","App.tsx","index.tsx"],"names":["module","exports","shader","extensions","derivatives","side","THREE","uniforms","time","type","value","progress","inside","surfaceColor","insideColor","tCube","pixels","window","innerWidth","innerHeight","uvRate1","vertexShader","fragmentShader","create","set","mouseCoords","scrolled","exploded","explosionPosition","undefined","scenes","currentScene","previousScene","cameraPosition","mouseMove","x","y","scroll","setExploded","setCurrentScene","scene","setCameraPosition","pos","setExplosionPosition","useStore","subscribe","getState","sign","number","Math","abs","Model","texturesUrl","path","texturesSource","textures","useMemo","load","minFilter","innerShader","shaderMat","useState","innerMesh","outerMesh","setS","useEffect","loader","GLTFLoader","dracoLoader","DRACOLoader","setDecoderPath","setDRACOLoader","gltf","console","log","voronoiObj","traverse","child","name","children","length","forEach","f","m","push","clone","innerGeometry","outerGeometry","j","filter","v","processedSurface","object","index","coords","position","surface","geometry","applyMatrix4","makeTranslation","z","volume","surfaceLength","attributes","array","volumeLength","offset","Array","fill","setAttribute","Float32Array","offset1","axis","random","normalize","axes","axes1","i","centroidVector","ar","len","getCentroid","centroid","centroid1","processSurface","BufferGeometryUtils","mergeBufferGeometries","computeBoundingSphere","useRef","mouseX","mouseY","scr","current","state","useSpring","group","useFrame","targetMouseX","targetMouseY","ta","taY","rotation","PI","ref","attach","shaderMaterial","uniforms-progress-value","args","uniforms-tCube-value","Stars","count","xOff","yOff","zOff","starOpacity","setStarOpacity","alpha","starPositionArray","positions","round","attachObject","itemSize","size","sizeAttenuation","color","transparent","opacity","fog","MainCamera","useThree","setDefaultCamera","camera","behavior","config","mass","tension","friction","onRest","sin","cos","lookAt","perspectiveCamera","distortCenter","roadWidth","palette","speed","maxHeight","MainShader","merge","basic","Land","landTexture","useLoader","mouseCoordinates","yDamped","xDamped","map","useCallback","start1","stop1","start2","stop2","lerp","start","end","amt","material","performance","now","position-z","rotation-x","wireframe","uniforms-palette-value","SkyShader","luminance","turbidity","rayleigh","mieCoefficient","mieDirectionalG","sunPosition","Vector3","join","LandscapeSky","changeRenderedScene","setOpacity","render","theta","phi","uniforms-opacity-value","NewSun","sun","gl","composer","EffectComposer","addPass","RenderPass","useLayoutEffect","godRays","GodRaysEffect","height","kernelSize","KernelSize","SMALL","density","decay","weight","exposure","samples","areaImage","Image","src","SMAAEffect","areaImageDataURL","searchImage","searchImageDataURL","smaaEffect","effectPass","EffectPass","renderToScreen","setSize","width","_","delta","TransitionsBetweenScenes","renderedScene","setRenderedScene","fallback","visible","InitialCanvas","style","background","shadowMap","onCreated","concurrent","NavScreen","styled","div","BackgroundWrappers","animated","WhiteStripes","NavBar","NavLink","Menu","navBlocks","stripesBlock","navLinks","Navigation","props","innWidth","innHeight","setWindowParameters","updateWindowDimensions","addEventListener","removeEventListener","isMenuOpened","setState","backgroundAnimRef","backgroundAnim","useSprings","item","from","left","to","next","a","switchNavMenu","stripesAnimRef","stripesAnim","linksAppearingRef","linksAppearing","useTrail","top","useChain","animations","key","onClick","Logo","MenuDotsWrapper","MenuDots","Header","isNavMenuOpened","ButtonsWrapper","Button","$color","TestButton","GlobalStyles","createGlobalStyle","Wrapper","App","openAndCloseNavMenu","onMouseMoveHandler","e","clientX","clientY","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f4540b88.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAQACAMAAADvODj6AAAAclBMVEUBGTYGFSUREREREREPDw9GU2J7k4jC6r0bNkllHUDtJU5eTF8AGDYOEhYJEyDMI0qNP1ghGjqpzKSlN1bgyFz53FyQiEztJE73wVouNj6nzana5JL521uOGzNzZy/J6K6x1bBTcm/x3mnOIUXyclNfZWCunBQsAAAAJnRSTlP/x//Hx//H/8fH/8fHx8fHx8fHx8f/x8fHx8fHx8fHx8fHx8fHx8zM38sAAADzSURBVHja7dlJcsIwFEVRESAEQgIJXSAd7f63yOwugHJdCumd0ZupLEv/y3Ipqh7KE4zYhzywGwdoZX6HMOIzyghGfEGp2RhlAiO+Ql5Rqb+pv488v64p5IHfkPWb+nBzfIe8fmeQG6vbTeeQH/MD8otNfUj97SB+Qv6wcbfpAnJhWqKsUF9co5X+5sYN5IG/IK8od5tukf6W80MXsZH6u4N8fnDjN+QX+wN5YLfN/CL1N/X38f4P5f4h6zf1IfOb+b1P/IN8TPqHfCJt5P/83fpbI/eTe1S9fg+QH/MIuTClv+X80EE8oer79TPkbXqBW/ivadTkA7ni7+8AAAAASUVORK5CYII=\"","import * as THREE from \"three\";\r\n\r\nexport const shader = {\r\n    extensions: {\r\n        derivatives: true\r\n    },\r\n    side: THREE.DoubleSide,\r\n    uniforms: {\r\n        time: {type: \"f\", value: 0},\r\n        progress: {type: \"f\", value: 0},\r\n        inside: {type: \"f\", value: 0},\r\n        surfaceColor: {type: \"v3\", value:  new THREE.Color('green')},\r\n        insideColor: {type: \"v3\", value:  new THREE.Color('blue')},\r\n        tCube: {value: THREE.CubeTexture},\r\n        pixels: {\r\n            type: \"v2\",\r\n            value: new THREE.Vector2(window.innerWidth, window.innerHeight)\r\n        },\r\n        uvRate1: {\r\n            value: new THREE.Vector2(1, 1)\r\n        }\r\n    },\r\n    vertexShader: `uniform float time;\r\n        uniform float progress;\r\n        uniform float inside;\r\n\r\n\r\n\r\n        attribute vec3 centroid;\r\n        attribute vec3 axis;\r\n        attribute float offset;\r\n\r\n        varying vec3 eye;\r\n        varying vec3 vNormal;\r\n        varying vec3 vReflect;\r\n\r\n        mat4 rotationMatrix(vec3 axis, float angle) {\r\n        axis = normalize(axis);\r\n        float s = sin(angle);\r\n        float c = cos(angle);\r\n        float oc = 1.0 - c;\r\n\r\n        return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,\r\n            oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,\r\n            oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,\r\n            0.0,                                0.0,                                0.0,                                1.0);\r\n    }\r\n\r\n    vec3 rotate(vec3 v, vec3 axis, float angle) {\r\n        mat4 m = rotationMatrix(axis, angle);\r\n        return (m * vec4(v, 1.0)).xyz;\r\n    }\r\n\r\n    vec3 bezier4(vec3 a, vec3 b, vec3 c, vec3 d, float t) {\r\n        return mix(mix(mix(a, b, t), mix(b, c, t), t), mix(mix(b, c, t), mix(c, d, t), t), t);\r\n    }\r\n\r\n    float easeInOutQuint(float t){\r\n        return t < 0.5 ? 16.0 * t * t * t * t * t : 1.0 + 16.0 * (--t) * t * t * t * t;\r\n    }\r\n    float easeOutQuint(float t){\r\n        return 1. + (--t) * t * t * t * t;\r\n    }\r\n    float easeOut(float t){\r\n        return  t * t * t;\r\n    }\r\n\r\n    void main() {\r\n\r\n        vec3 newposition = position;\r\n\r\n        float vTemp =  1. - ((centroid.x + centroid.y)*0.5 + 1.)/2.;\r\n\r\n        float tProgress = max(0.0, (progress - vTemp*0.4) /0.6);\r\n        vec3 newnormal = rotate(normal,axis,tProgress*(3. + offset*10.));\r\n        vNormal = newnormal;\r\n\r\n        newposition += newposition + centroid*(tProgress)*(3. + offset*7.);\r\n\r\n        eye = normalize( vec3( modelViewMatrix * vec4( newposition, 1.0 ) ) );\r\n        vec4 worldPosition = modelMatrix * vec4( newposition, 1.0 );\r\n        vec3 worldNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * newnormal );\r\n        vec3 I = worldPosition.xyz - cameraPosition;\r\n        vReflect = reflect( I, worldNormal );\r\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( newposition, 1.0 );\r\n                }`,\r\n    fragmentShader: `uniform float time;\r\n        uniform float progress;\r\n        uniform float inside;\r\n        uniform vec3 surfaceColor;\r\n        uniform vec3 insideColor;\r\n        uniform samplerCube tCube;\r\n        \r\n        varying vec2 vUv;\r\n        varying vec2 vUv1;\r\n        varying vec3 eye;\r\n        varying vec3 vNormal;\r\n        varying vec3 vReflect;\r\n        \r\n        \r\n        void main()\t{\r\n        \r\n            vec3 r = reflect( eye, vNormal );\r\n            float m = 2. * sqrt( pow( r.x, 2. ) + pow( r.y, 2. ) + pow( r.z + 1., 2. ) );\r\n            vec2 vN = r.xy / m + .5;\r\n            vec4 reflectedColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );\r\n        \r\n            vec3 light = normalize(vec3(12.,10.,10.));\r\n            vec3 light1 = normalize(vec3(-12.,-10.,-10.));\r\n            float l = clamp(dot(light, vNormal),0.5,1.);\r\n            l += clamp(dot(light1, vNormal),0.5,1.)/2.;\r\n            // l /= 2.;\r\n            \r\n            if(inside>0.5){\r\n                gl_FragColor = vec4(l,l,l,1.)*vec4(surfaceColor,1.);\r\n            } else{\r\n                gl_FragColor = reflectedColor*vec4(insideColor,1.);\r\n            }\r\n\r\n        }`\r\n}","import create from 'zustand';\r\n\r\ntype ScenesType = {\r\n    currentScene: string\r\n    previousScene: string\r\n}\r\n\r\ntype Store = {\r\n    mouseCoords: number[],\r\n    scrolled: number,\r\n    exploded: boolean,\r\n    explosionPosition: [number, number, number] | undefined,\r\n    scenes: ScenesType,\r\n    cameraPosition: [number, number, number],\r\n    mouseMove: ([x, y]: number[]) => void,\r\n    scroll: (scrolled: number) => void,\r\n    setExploded: (exploded: boolean) => void,\r\n    setCurrentScene: (scene: ScenesType) => void,\r\n    setCameraPosition: (pos: [number, number, number]) => void,\r\n    setExplosionPosition: (pos: [number, number, number]) => void,\r\n}\r\n\r\nconst [useStore, { subscribe, getState }] = create<Store>(set => ({\r\n    mouseCoords: [0, 0],\r\n    scrolled: 0,\r\n    exploded: false,\r\n    explosionPosition: undefined,\r\n    scenes: {currentScene: '', previousScene: ''},\r\n    cameraPosition: [0, 10, 4],\r\n    mouseMove: ([x, y]) => set({mouseCoords: [x, y]}),\r\n    scroll: (scrolled) => set({scrolled}),\r\n    setExploded: (exploded) => set({exploded}),\r\n    setCurrentScene: (scene) => set({scenes: scene}),\r\n    setCameraPosition: (pos) => set({cameraPosition: pos}),\r\n    setExplosionPosition: (pos) => set({explosionPosition: pos})\r\n}));\r\n\r\nexport {useStore, subscribe, getState}","import React, {useEffect, useMemo, useRef, useState} from 'react';\r\nimport * as THREE from 'three';\r\nimport {DRACOLoader} from \"three/examples/jsm/loaders/DRACOLoader\";\r\nimport {shader} from \"./shaderMaterial\";\r\nimport {BufferGeometryUtils} from \"three/examples/jsm/utils/BufferGeometryUtils\";\r\nimport {useFrame} from \"react-three-fiber\";\r\nimport {getState, subscribe, useStore} from \"../../../utils/zustandStore\";\r\nimport {animated, useSpring} from 'react-spring/three';\r\nimport {GLTFLoader} from \"three/examples/jsm/loaders/GLTFLoader\";\r\n\r\ninterface CustomMesh extends THREE.Mesh {\r\n    geometry: THREE.BufferGeometry\r\n}\r\n\r\ninterface CustomObject extends THREE.Object3D {\r\n    children: CustomMesh[]\r\n}\r\n\r\ntype StateType = {\r\n    innerMesh: THREE.BufferGeometry | null,\r\n    outerMesh: THREE.BufferGeometry | null\r\n}\r\n\r\nconst processSurface = (object: CustomObject, index: number) => {\r\n    let coords = object.position;\r\n    let surface = object.children[0].geometry.clone().applyMatrix4(\r\n        new THREE.Matrix4().makeTranslation(coords.x, coords.y, coords.z)\r\n    );\r\n    let volume = object.children[1].geometry.clone().applyMatrix4(new THREE.Matrix4().makeTranslation(coords.x, coords.y, coords.z));\r\n\r\n    let surfaceLength = object.children[0].geometry.attributes.position.array.length / 3;\r\n    let volumeLength = object.children[1].geometry.attributes.position.array.length / 3;\r\n    //  id\r\n    let offset = new Array(surfaceLength).fill(index / 100);\r\n    surface.setAttribute(\r\n        \"offset\",\r\n        new THREE.BufferAttribute(new Float32Array(offset), 1)\r\n    );\r\n\r\n    let offset1 = new Array(volumeLength).fill(index / 100);\r\n    volume.setAttribute(\r\n        \"offset\",\r\n        new THREE.BufferAttribute(new Float32Array(offset1), 1)\r\n    );\r\n\r\n    // axis\r\n    let getRandomAxis = () => {\r\n        return new THREE.Vector3(\r\n            Math.random() - 0.5,\r\n            Math.random() - 0.5,\r\n            Math.random() - 0.5\r\n        ).normalize();\r\n    };\r\n\r\n    let axis = getRandomAxis();\r\n    let axes = new Array(surfaceLength * 3).fill(0);\r\n    let axes1 = new Array(volumeLength * 3).fill(0);\r\n    for (let i = 0; i < surfaceLength * 3; i = i + 3) {\r\n        axes[i] = axis.x;\r\n        axes[i + 1] = axis.y;\r\n        axes[i + 2] = axis.z;\r\n    }\r\n    surface.setAttribute(\r\n        \"axis\",\r\n        new THREE.BufferAttribute(new Float32Array(axes), 3)\r\n    );\r\n    for (let i = 0; i < volumeLength * 3; i = i + 3) {\r\n        axes1[i] = axis.x;\r\n        axes1[i + 1] = axis.y;\r\n        axes1[i + 2] = axis.z;\r\n    }\r\n    volume.setAttribute(\r\n        \"axis\",\r\n        new THREE.BufferAttribute(new Float32Array(axes1), 3)\r\n    );\r\n\r\n    let getCentroid = (geometry: THREE.BufferGeometry) => {\r\n        let ar = geometry.attributes.position.array;\r\n        let len = ar.length;\r\n        let x = 0,\r\n            y = 0,\r\n            z = 0;\r\n        for (let i = 0; i < len; i = i + 3) {\r\n            x += ar[i];\r\n            y += ar[i + 1];\r\n            z += ar[i + 2];\r\n        }\r\n        return {x: (3 * x) / len, y: (3 * y) / len, z: (3 * z) / len};\r\n    }\r\n\r\n    let centroidVector = getCentroid(surface);\r\n    let centroid = new Array(surfaceLength * 3).fill(0);\r\n    let centroid1 = new Array(volumeLength * 3).fill(0);\r\n    for (let i = 0; i < surfaceLength * 3; i = i + 3) {\r\n        centroid[i] = centroidVector.x;\r\n        centroid[i + 1] = centroidVector.y;\r\n        centroid[i + 2] = centroidVector.z;\r\n    }\r\n    for (let i = 0; i < volumeLength * 3; i = i + 3) {\r\n        centroid1[i] = centroidVector.x;\r\n        centroid1[i + 1] = centroidVector.y;\r\n        centroid1[i + 2] = centroidVector.z;\r\n    }\r\n    surface.setAttribute(\r\n        \"centroid\",\r\n        new THREE.BufferAttribute(new Float32Array(centroid), 3)\r\n    );\r\n    volume.setAttribute(\r\n        \"centroid\",\r\n        new THREE.BufferAttribute(new Float32Array(centroid1), 3)\r\n    );\r\n\r\n    return {surface, volume};\r\n};\r\n\r\nconst sign = (number: number) => number === 0 ? 1 : number / Math.abs(number);\r\n\r\n\r\nconst Model: React.FC = () => {\r\n\r\n    const texturesSource = () => {\r\n        let path = \"img/newsky/\";\r\n        let format = \".jpg\";\r\n        let url = [\r\n            path + \"px\" + format,\r\n            path + \"nx\" + format,\r\n            path + \"py\" + format,\r\n            path + \"ny\" + format,\r\n            path + \"pz\" + format,\r\n            path + \"nz\" + format\r\n        ];\r\n        return url\r\n    };\r\n\r\n    const texturesUrl = texturesSource();\r\n    const textures = useMemo(() => new THREE.CubeTextureLoader().load(texturesUrl), [texturesUrl]);\r\n    textures.minFilter = THREE.LinearFilter;\r\n\r\n    const innerShader = useMemo(() => {\r\n        let shaderMat = shader;\r\n        shaderMat.uniforms.inside.value = 1;\r\n        return shaderMat\r\n    }, []);\r\n\r\n    const [{innerMesh, outerMesh}, setS] = useState<StateType>({innerMesh: null, outerMesh: null});\r\n\r\n    useEffect(() => {\r\n        const loader = new GLTFLoader();\r\n        const dracoLoader = new DRACOLoader();\r\n        dracoLoader.setDecoderPath('/draco-gltf/');\r\n        loader.setDRACOLoader(dracoLoader);\r\n\r\n        loader.load(\"ico-more.glb\",\r\n            (gltf) => {\r\n            console.log(gltf)\r\n                let voronoiObj: THREE.Object3D[] = [];\r\n                gltf.scene.traverse((child) => {\r\n                    if (child.name === \"Voronoi_Fracture\") {\r\n                        if (child.children[0].children.length > 2) {\r\n                            child.children.forEach(f => {\r\n                                f.children.forEach(m => {\r\n                                    voronoiObj.push(m.clone());\r\n                                });\r\n                            });\r\n                        } else {\r\n                            child.children.forEach(m => {\r\n                                voronoiObj.push(m.clone());\r\n                            });\r\n                        }\r\n                    }\r\n                });\r\n\r\n                let innerGeometry: THREE.BufferGeometry[] = [];\r\n                let outerGeometry: THREE.BufferGeometry[] = [];\r\n                let j = 0;\r\n                voronoiObj = voronoiObj.filter(v => {\r\n                    if (v instanceof THREE.Mesh) return false;\r\n                    else {\r\n                        j++;\r\n                        let processedSurface = processSurface(v as CustomObject, j);\r\n                        outerGeometry.push(processedSurface.surface);\r\n                        innerGeometry.push(processedSurface.volume);\r\n                        return true;\r\n                    }\r\n                });\r\n\r\n                let innerMesh = BufferGeometryUtils.mergeBufferGeometries(\r\n                    innerGeometry,\r\n                    false\r\n                );\r\n                innerMesh.computeBoundingSphere();\r\n\r\n                let outerMesh = BufferGeometryUtils.mergeBufferGeometries(\r\n                    outerGeometry,\r\n                    false\r\n                );\r\n                outerMesh.computeBoundingSphere();\r\n                setS({innerMesh, outerMesh});\r\n            }\r\n        );\r\n    }, []);\r\n\r\n//zustand Store\r\n    const mouseCoords = useRef(getState().mouseCoords);\r\n    const mouseX = useRef(0);\r\n    const mouseY = useRef(0);\r\n    useEffect(() => subscribe(scr => mouseCoords.current = scr as number[], state => state.mouseCoords), []);\r\n\r\n//explosion\r\n    const exploded = useStore(state => state.exploded)\r\n    const {progress} = useSpring({\r\n        progress: exploded ? 1 : 0\r\n    });\r\n\r\n    const group = useRef<THREE.Group>(new THREE.Group());\r\n\r\n    useFrame(() => {\r\n        let targetMouseX = 2 * (mouseCoords.current[0] - window.innerWidth / 2) / window.innerWidth;\r\n        let targetMouseY = 2 * (mouseCoords.current[1] - window.innerHeight / 2) / window.innerHeight;\r\n        mouseX.current += (targetMouseX - mouseX.current) * 0.05;\r\n        mouseY.current += (targetMouseY - mouseY.current) * 0.05;\r\n        let ta = Math.abs(mouseX.current);\r\n        let taY = Math.abs(mouseY.current);\r\n        group.current.rotation.x = Math.PI / 2 - taY * (2 - taY) * Math.PI * sign(mouseY.current);\r\n        group.current.rotation.y = Math.PI / 2 - ta * (2 - ta) * Math.PI * sign(mouseX.current);\r\n        group.current.rotation.z = Math.PI / 2 - ta * (2 - ta) * Math.PI * sign(mouseX.current);\r\n        /*console.log(group.current.position)*/\r\n    });\r\n\r\n    return (\r\n        <group ref={group} position={[0, 0, 0]}>\r\n            <mesh>\r\n                <bufferGeometry attach=\"geometry\" {...innerMesh}/>\r\n                <animated.shaderMaterial uniforms-progress-value={progress} attach=\"material\" args={[shader]}\r\n                                         uniforms-tCube-value={textures}/>\r\n            </mesh>\r\n            <mesh>\r\n                <bufferGeometry attach=\"geometry\" {...outerMesh}/>\r\n                <animated.shaderMaterial uniforms-progress-value={progress} attach=\"material\" args={[innerShader]}\r\n                                         uniforms-tCube-value={textures}/>\r\n            </mesh>\r\n        </group>\r\n    )\r\n};\r\n\r\nexport default Model","import React, { useMemo, useState } from \"react\"\r\nimport { useFrame } from \"react-three-fiber\"\r\n\r\nconst lerp = (start: number, end: number, alpha: number) => start * (1 - alpha) + end * alpha;\r\n\r\nconst Stars = ({ count = 1000, xOff = 0, yOff = 0, zOff = 50 }) => {\r\n\r\n    const [starOpacity, setStarOpacity] = useState(0.2)\r\n\r\n    useFrame(() => {\r\n        if (starOpacity < 1) setStarOpacity(lerp(starOpacity, 1.05, 0.05))\r\n    })\r\n\r\n    const starPositionArray = useMemo(() => {\r\n        const positions = []\r\n        for (let i = 0; i < count; i++) {\r\n            positions.push((xOff + Math.random() * 1000) * (Math.round(Math.random()) ? -1 : 1))\r\n            positions.push((yOff + Math.random() * 1000) * (Math.round(Math.random()) ? -1 : 1))\r\n            positions.push((zOff + Math.random() * 1000) * (Math.round(Math.random()) ? -1 : 1))\r\n        }\r\n        return new Float32Array(positions)\r\n    }, [count, xOff, yOff, zOff])\r\n\r\n    return (\r\n        <points>\r\n            <bufferGeometry attach=\"geometry\">\r\n                <bufferAttribute attachObject={[\"attributes\", \"position\"]} count={count} array={starPositionArray} itemSize={3} />\r\n            </bufferGeometry>\r\n\r\n            <pointsMaterial attach=\"material\" size={1.5} sizeAttenuation color=\"white\" transparent opacity={starOpacity} fog={false} />\r\n        </points>\r\n    )\r\n}\r\n\r\nexport default Stars\r\n","import React, {useEffect, useRef} from \"react\";\r\nimport {useFrame, useThree} from \"react-three-fiber\";\r\nimport {animated, useSpring} from \"react-spring/three\";\r\nimport {useStore} from \"../../utils/zustandStore\";\r\n\r\nconst MainCamera = () => {\r\n\r\n    const cameraPosition = useStore(state => state.cameraPosition);\r\n    const explosionPosition = useStore(state => state.explosionPosition);\r\n    const scenes = useStore(state => state.scenes);\r\n\r\n    const ref = useRef();\r\n    const {setDefaultCamera, camera} = useThree();\r\n    // Make the camera known to the system\r\n    useEffect(() => void setDefaultCamera(ref.current!), []);\r\n\r\n    const behavior = useRef('');\r\n    const rotation = useRef(0);\r\n    const setCameraBehavior = () => {\r\n        if (scenes.currentScene === 'explosion' && scenes.previousScene === 'landscape') {\r\n            behavior.current = 'radial';\r\n        }\r\n    };\r\n\r\n    const {position} = useSpring({\r\n        position: cameraPosition,\r\n        config: {\r\n            mass: 0.6,\r\n            tension: 100,\r\n            friction: 80,\r\n        },\r\n        onRest: () => setCameraBehavior()\r\n    });\r\n    useFrame(() => {\r\n        if (explosionPosition) {\r\n            if (behavior.current === 'radial') {\r\n                rotation.current += 0.001;\r\n                camera.position.x = explosionPosition[0] + Math.sin(rotation.current) * 10;\r\n                camera.position.z = explosionPosition[2] + Math.cos(rotation.current) * 30;\r\n            }\r\n            camera.lookAt(...explosionPosition)\r\n        }\r\n    })\r\n\r\n    // @ts-ignore\r\n    return <animated.perspectiveCamera ref={ref} position={position}/>\r\n}\r\n\r\nexport default MainCamera","import * as THREE from \"three\";\r\n\r\nconst uniforms = {\r\n        time: {type: \"f\", value: 0.0},\r\n        distortCenter: {type: \"f\", value: 0.1},\r\n        roadWidth: {type: \"f\", value: 0.5},\r\n        palette: {type: \"t\", value: null},\r\n        speed: {type: \"f\", value: 1.5},\r\n        maxHeight: {type: \"f\", value: 10.0},\r\n        color: new THREE.Color(1, 1, 1),\r\n        scroll: { type: \"f\", value: 0.0 },\r\n    };\r\n\r\nexport const MainShader = {\r\n    uniforms: THREE.UniformsUtils.merge([ THREE.ShaderLib.basic.uniforms, uniforms ]),\r\n    vertexShader: `vec3 mod289(vec3 x)\r\n    {\r\n        return x - floor(x * (1.0 / 289.0)) * 289.0;\r\n    }\r\n    \r\n    vec4 mod289(vec4 x)\r\n    {\r\n        return x - floor(x * (1.0 / 289.0)) * 289.0;\r\n    }\r\n    \r\n    vec4 permute(vec4 x)\r\n    {\r\n        return mod289(((x*34.0)+1.0)*x);\r\n    }\r\n    \r\n    vec4 taylorInvSqrt(vec4 r)\r\n    {\r\n        return 1.79284291400159 - 0.85373472095314 * r;\r\n    }\r\n    \r\n    vec3 fade(vec3 t) {\r\n        return t*t*t*(t*(t*6.0-15.0)+10.0);\r\n    }\r\n    \r\n    float cnoise(vec3 P)\r\n    {\r\n        vec3 Pi0 = floor(P); // Integer part for indexing\r\n        vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\r\n        Pi0 = mod289(Pi0);\r\n        Pi1 = mod289(Pi1);\r\n        vec3 Pf0 = fract(P); // Fractional part for interpolation\r\n        vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\r\n        vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\r\n        vec4 iy = vec4(Pi0.yy, Pi1.yy);\r\n        vec4 iz0 = Pi0.zzzz;\r\n        vec4 iz1 = Pi1.zzzz;\r\n    \r\n        vec4 ixy = permute(permute(ix) + iy);\r\n        vec4 ixy0 = permute(ixy + iz0);\r\n        vec4 ixy1 = permute(ixy + iz1);\r\n    \r\n        vec4 gx0 = ixy0 * (1.0 / 7.0);\r\n        vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\r\n        gx0 = fract(gx0);\r\n        vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\r\n        vec4 sz0 = step(gz0, vec4(0.0));\r\n        gx0 -= sz0 * (step(0.0, gx0) - 0.5);\r\n        gy0 -= sz0 * (step(0.0, gy0) - 0.5);\r\n    \r\n        vec4 gx1 = ixy1 * (1.0 / 7.0);\r\n        vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\r\n        gx1 = fract(gx1);\r\n        vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\r\n        vec4 sz1 = step(gz1, vec4(0.0));\r\n        gx1 -= sz1 * (step(0.0, gx1) - 0.5);\r\n        gy1 -= sz1 * (step(0.0, gy1) - 0.5);\r\n    \r\n        vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\r\n        vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\r\n        vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\r\n        vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\r\n        vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\r\n        vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\r\n        vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\r\n        vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\r\n    \r\n        vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\r\n        g000 *= norm0.x;\r\n        g010 *= norm0.y;\r\n        g100 *= norm0.z;\r\n        g110 *= norm0.w;\r\n        vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\r\n        g001 *= norm1.x;\r\n        g011 *= norm1.y;\r\n        g101 *= norm1.z;\r\n        g111 *= norm1.w;\r\n    \r\n        float n000 = dot(g000, Pf0);\r\n        float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\r\n        float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\r\n        float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\r\n        float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\r\n        float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\r\n        float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\r\n        float n111 = dot(g111, Pf1);\r\n    \r\n        vec3 fade_xyz = fade(Pf0);\r\n        vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\r\n        vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\r\n        float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\r\n        return 2.2 * n_xyz;\r\n    }\r\n    \r\n    float pnoise(vec3 P, vec3 rep)\r\n    {\r\n        vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period\r\n        vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period\r\n        Pi0 = mod289(Pi0);\r\n        Pi1 = mod289(Pi1);\r\n        vec3 Pf0 = fract(P); // Fractional part for interpolation\r\n        vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\r\n        vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\r\n        vec4 iy = vec4(Pi0.yy, Pi1.yy);\r\n        vec4 iz0 = Pi0.zzzz;\r\n        vec4 iz1 = Pi1.zzzz;\r\n    \r\n        vec4 ixy = permute(permute(ix) + iy);\r\n        vec4 ixy0 = permute(ixy + iz0);\r\n        vec4 ixy1 = permute(ixy + iz1);\r\n    \r\n        vec4 gx0 = ixy0 * (1.0 / 7.0);\r\n        vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\r\n        gx0 = fract(gx0);\r\n        vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\r\n        vec4 sz0 = step(gz0, vec4(0.0));\r\n        gx0 -= sz0 * (step(0.0, gx0) - 0.5);\r\n        gy0 -= sz0 * (step(0.0, gy0) - 0.5);\r\n    \r\n        vec4 gx1 = ixy1 * (1.0 / 7.0);\r\n        vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\r\n        gx1 = fract(gx1);\r\n        vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\r\n        vec4 sz1 = step(gz1, vec4(0.0));\r\n        gx1 -= sz1 * (step(0.0, gx1) - 0.5);\r\n        gy1 -= sz1 * (step(0.0, gy1) - 0.5);\r\n    \r\n        vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\r\n        vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\r\n        vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\r\n        vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\r\n        vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\r\n        vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\r\n        vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\r\n        vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\r\n    \r\n        vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\r\n        g000 *= norm0.x;\r\n        g010 *= norm0.y;\r\n        g100 *= norm0.z;\r\n        g110 *= norm0.w;\r\n        vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\r\n        g001 *= norm1.x;\r\n        g011 *= norm1.y;\r\n        g101 *= norm1.z;\r\n        g111 *= norm1.w;\r\n    \r\n        float n000 = dot(g000, Pf0);\r\n        float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\r\n        float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\r\n        float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\r\n        float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\r\n        float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\r\n        float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\r\n        float n111 = dot(g111, Pf1);\r\n    \r\n        vec3 fade_xyz = fade(Pf0);\r\n        vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\r\n        vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\r\n        float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\r\n        return 2.2 * n_xyz;\r\n    }\r\n\r\n    #define PI 3.1415926535897932384626433832795\r\n    \r\n    uniform float time;\r\n    uniform float maxHeight;\r\n    uniform float speed;\r\n    uniform float distortCenter;\r\n    uniform float roadWidth;\r\n    varying float vDisplace;\r\n    \r\n    varying float fogDepth;\r\n    \r\n    void main(){\r\n\r\n        float t = time * speed;\r\n        float wRoad = distortCenter;\r\n        float wRoad2 = wRoad * 0.5;\r\n    \r\n        float angleCenter = uv.y * PI*4.0;\r\n        angleCenter += t * 0.9;\r\n    \r\n        float centerOff = (\r\n            sin(angleCenter) +\r\n            sin(angleCenter*0.5)\r\n        ) * wRoad;\r\n    \r\n    \r\n        vec3 noiseIn = vec3(uv, 1.0)*10.0;\r\n        float noise = cnoise(vec3(noiseIn.x, noiseIn.y + t, noiseIn.z));\r\n        noise += 1.0;\r\n        float h = noise;\r\n        float angle = (uv.x - centerOff) * PI;\r\n        float f = abs(cos(angle));\r\n        h *= pow(f, 1.5 + roadWidth);\r\n    \r\n    \r\n        vDisplace = h;\r\n    \r\n    \r\n        h*=maxHeight;\r\n    \r\n        vec3 transformed = vec3( position.x, position.y, position.z + h );\r\n    \r\n    \r\n        vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\r\n        gl_Position = projectionMatrix * mvPosition;\r\n    \r\n        fogDepth = -mvPosition.z;\r\n    \r\n    }`,\r\n\r\n    fragmentShader: `uniform float time;\r\n    uniform vec3 color;\r\n    uniform sampler2D palette;\r\n    varying float vDisplace;\r\n    \r\n    uniform vec3 fogColor;\r\n    uniform float fogNear;\r\n    uniform float fogFar;\r\n    varying float fogDepth;\r\n    \r\n    void main(){\r\n    \r\n        vec2 stripPos = vec2( 0.0, vDisplace );\r\n        vec4 stripColor = texture2D( palette, stripPos );\r\n        stripColor *= pow(1.0-vDisplace, 1.0);\r\n    \r\n        gl_FragColor = stripColor;\r\n    \r\n        #ifdef USE_FOG\r\n        float fogFactor = smoothstep( fogNear, fogFar, fogDepth );\r\n        gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\r\n        #endif\r\n    }`\r\n}","import React, {useCallback, useEffect, useRef} from 'react';\r\nimport * as THREE from 'three';\r\nimport {MainShader} from \"./shaders/mainShader\";\r\nimport {useFrame, useLoader} from \"react-three-fiber\";\r\nimport palette from '../textures/land/pallete.png';\r\nimport {getState, subscribe} from \"../../../utils/zustandStore\";\r\n\r\nconst Land: React.FC= () => {\r\n\r\n    const landTexture = useLoader(THREE.TextureLoader, palette);\r\n\r\n    const mouseCoordinates = useRef(getState().mouseCoords);\r\n    const yDamped = useRef(0);\r\n    const xDamped = useRef(0);\r\n    useEffect(() => subscribe(scr => mouseCoordinates.current = scr as number[], state => state.mouseCoords), []);\r\n\r\n    const map = useCallback((value: number, start1: number, stop1: number, start2: number, stop2: number) => {\r\n        return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1))\r\n    }, []);\r\n    const lerp = useCallback((start: number, end: number, amt: number) => {\r\n        return (1 - amt) * start + amt * end;\r\n    }, []);\r\n\r\n    const material = useRef(new THREE.ShaderMaterial());\r\n\r\n    useFrame(() => {\r\n        const time = performance.now()*0.001;\r\n        yDamped.current = lerp(yDamped.current, mouseCoordinates.current[1], 0.1);\r\n        xDamped.current = lerp(xDamped.current, mouseCoordinates.current[0], 0.1);\r\n        material.current.uniforms.distortCenter.value = Math.sin(time) * 0.1;\r\n        material.current.uniforms.maxHeight.value = map(yDamped.current, 0, window.innerHeight, 20, 5);\r\n        material.current.uniforms.time.value = time;\r\n        material.current.uniforms.roadWidth.value = map(xDamped.current, 0, window.innerWidth, 1, 4.5);\r\n        /*console.log(material.current.uniforms)*/\r\n    });\r\n\r\n    return (\r\n        <mesh position-z={-180} rotation-x={-Math.PI / 2} >\r\n            <planeBufferGeometry attach=\"geometry\" args={[100, 400, 400, 400]}/>\r\n            <shaderMaterial attach=\"material\" ref={material} args={[MainShader]} wireframe={false}\r\n            uniforms-palette-value={landTexture} fog={true}/>\r\n        </mesh>\r\n    )\r\n};\r\n\r\nexport default Land","import {Vector3} from \"three\";\r\n\r\nexport const SkyShader = {\r\n    uniforms: {\r\n        luminance: {value: 1},\r\n        turbidity: {value: 13},\r\n        rayleigh: {value: 1.2},\r\n        mieCoefficient: {value: 0.1},\r\n        mieDirectionalG: {value: 0.58},\r\n        sunPosition: {value: new Vector3()},\r\n        opacity: {value: 1.0}\r\n    },\r\n\r\n    vertexShader: [\r\n        'uniform vec3 sunPosition;',\r\n        'uniform float rayleigh;',\r\n        'uniform float turbidity;',\r\n        'uniform float mieCoefficient;',\r\n\r\n        'varying vec3 vWorldPosition;',\r\n        'varying vec3 vSunDirection;',\r\n        'varying float vSunfade;',\r\n        'varying vec3 vBetaR;',\r\n        'varying vec3 vBetaM;',\r\n        'varying float vSunE;',\r\n\r\n        'const vec3 up = vec3( 0.0, 1.0, 0.0 );',\r\n\r\n        // constants for atmospheric scattering\r\n        'const float e = 2.71828182845904523536028747135266249775724709369995957;',\r\n        'const float pi = 3.141592653589793238462643383279502884197169;',\r\n\r\n        // wavelength of used primaries, according to preetham\r\n        'const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );',\r\n        // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:\r\n        // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))\r\n        'const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );',\r\n\r\n        // mie stuff\r\n        // K coefficient for the primaries\r\n        'const float v = 4.0;',\r\n        'const vec3 K = vec3( 0.686, 0.678, 0.666 );',\r\n        // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K\r\n        'const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );',\r\n\r\n        // earth shadow hack\r\n        // cutoffAngle = pi / 1.95;\r\n        'const float cutoffAngle = 1.6110731556870734;',\r\n        'const float steepness = 1.5;',\r\n        'const float EE = 1000.0;',\r\n\r\n        'float sunIntensity( float zenithAngleCos ) {',\r\n        '\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );',\r\n        '\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );',\r\n        '}',\r\n\r\n        'vec3 totalMie( float T ) {',\r\n        '\tfloat c = ( 0.2 * T ) * 10E-18;',\r\n        '\treturn 0.434 * c * MieConst;',\r\n        '}',\r\n\r\n        'void main() {',\r\n\r\n        '\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );',\r\n        '\tvWorldPosition = worldPosition.xyz;',\r\n\r\n        '\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',\r\n        '\tgl_Position.z = gl_Position.w;', // set z to camera.far\r\n\r\n        '\tvSunDirection = normalize( sunPosition );',\r\n\r\n        '\tvSunE = sunIntensity( dot( vSunDirection, up ) );',\r\n\r\n        '\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );',\r\n\r\n        '\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );',\r\n\r\n        // extinction (absorbtion + out scattering)\r\n        // rayleigh coefficients\r\n        '\tvBetaR = totalRayleigh * rayleighCoefficient;',\r\n\r\n        // mie coefficients\r\n        '\tvBetaM = totalMie( turbidity ) * mieCoefficient;',\r\n\r\n        '}'\r\n    ].join('\\n'),\r\n\r\n    fragmentShader: [\r\n        'varying vec3 vWorldPosition;',\r\n        'varying vec3 vSunDirection;',\r\n        'varying float vSunfade;',\r\n        'varying vec3 vBetaR;',\r\n        'varying vec3 vBetaM;',\r\n        'varying float vSunE;',\r\n\r\n        'uniform float luminance;',\r\n        'uniform float mieDirectionalG;',\r\n        'uniform float opacity;',\r\n\r\n        'const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );',\r\n\r\n        // constants for atmospheric scattering\r\n        'const float pi = 3.141592653589793238462643383279502884197169;',\r\n\r\n        'const float n = 1.0003;', // refractive index of air\r\n        'const float N = 2.545E25;', // number of molecules per unit volume for air at\r\n        // 288.15K and 1013mb (sea level -45 celsius)\r\n\r\n        // optical length at zenith for molecules\r\n        'const float rayleighZenithLength = 8.4E3;',\r\n        'const float mieZenithLength = 1.25E3;',\r\n        'const vec3 up = vec3( 0.0, 1.0, 0.0 );',\r\n        // 66 arc seconds -> degrees, and the cosine of that\r\n        'const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;',\r\n\r\n        // 3.0 / ( 16.0 * pi )\r\n        'const float THREE_OVER_SIXTEENPI = 0.05968310365946075;',\r\n        // 1.0 / ( 4.0 * pi )\r\n        'const float ONE_OVER_FOURPI = 0.07957747154594767;',\r\n\r\n        'float rayleighPhase( float cosTheta ) {',\r\n        '\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );',\r\n        '}',\r\n\r\n        'float hgPhase( float cosTheta, float g ) {',\r\n        '\tfloat g2 = pow( g, 2.0 );',\r\n        '\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );',\r\n        '\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );',\r\n        '}',\r\n\r\n        // Filmic ToneMapping http://filmicgames.com/archives/75\r\n        'const float A = 0.15;',\r\n        'const float B = 0.50;',\r\n        'const float C = 0.10;',\r\n        'const float D = 0.20;',\r\n        'const float E = 0.02;',\r\n        'const float F = 0.30;',\r\n\r\n        'const float whiteScale = 1.0748724675633854;', // 1.0 / Uncharted2Tonemap(1000.0)\r\n\r\n        'vec3 Uncharted2Tonemap( vec3 x ) {',\r\n        '\treturn ( ( x * ( A * x + C * B ) + D * E ) / ( x * ( A * x + B ) + D * F ) ) - E / F;',\r\n        '}',\r\n\r\n\r\n        'void main() {',\r\n        // optical length\r\n        // cutoff angle at 90 to avoid singularity in next formula.\r\n        '\tfloat zenithAngle = acos( max( 0.0, dot( up, normalize( vWorldPosition - cameraPos ) ) ) );',\r\n        '\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );',\r\n        '\tfloat sR = rayleighZenithLength * inverse;',\r\n        '\tfloat sM = mieZenithLength * inverse;',\r\n\r\n        // combined extinction factor\r\n        '\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );',\r\n\r\n        // in scattering\r\n        '\tfloat cosTheta = dot( normalize( vWorldPosition - cameraPos ), vSunDirection );',\r\n\r\n        '\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );',\r\n        '\tvec3 betaRTheta = vBetaR * rPhase;',\r\n\r\n        '\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );',\r\n        '\tvec3 betaMTheta = vBetaM * mPhase;',\r\n\r\n        '\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );',\r\n        '\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );',\r\n\r\n        // nightsky\r\n        '\tvec3 direction = normalize( vWorldPosition - cameraPos );',\r\n        '\tfloat theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]',\r\n        '\tfloat phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]',\r\n        '\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );',\r\n        '\tvec3 L0 = vec3( 0.1 ) * Fex;',\r\n\r\n        // composition + solar disc\r\n        '\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );',\r\n        '\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;',\r\n\r\n        '\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );',\r\n\r\n        '\tvec3 curr = Uncharted2Tonemap( ( log2( 2.0 / pow( luminance, 4.0 ) ) ) * texColor );',\r\n        '\tvec3 color = curr * whiteScale;',\r\n\r\n        '\tvec3 retColor = pow( color, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );',\r\n\r\n        '\tgl_FragColor = vec4( retColor, opacity );',\r\n\r\n        '}'\r\n    ].join('\\n')\r\n}","import React, {useCallback, useEffect, useRef} from 'react';\r\nimport * as THREE from 'three';\r\nimport {SkyShader} from \"./shaders/SkyShader\";\r\nimport {useFrame} from \"react-three-fiber\";\r\nimport {getState, subscribe, useStore} from \"../../../utils/zustandStore\";\r\nimport {useSpring, animated} from \"react-spring/three\";\r\n\r\ntype PropsType ={\r\n    changeRenderedScene: (scene: string) => void\r\n}\r\n\r\nconst LandscapeSky: React.FC<PropsType> = ({changeRenderedScene}) => {\r\n\r\n    const scrolled = useRef(getState().scrolled);\r\n    const scenes = useStore(state => state.scenes);\r\n    const setCameraPosition = useStore(state => state.setCameraPosition);\r\n    const setExplosionPosition = useStore(state => state.setExplosionPosition);\r\n\r\n    useEffect(() => subscribe(scr => scrolled.current = scr as number, state => state.scrolled));\r\n\r\n    const material = useRef(new THREE.ShaderMaterial());\r\n\r\n    const [{opacity}, setOpacity] = useSpring(() => ({opacity: 1}));\r\n    useEffect(() => {\r\n        if (scenes.currentScene === 'explosion' && scenes.previousScene === 'landscape') {\r\n            const sunPosition: [number, number, number] = material.current.uniforms.sunPosition.value;\r\n            const cameraPosition: [number, number, number] = [sunPosition[0], sunPosition[1]+10, sunPosition[2]+30];\r\n            console.log(sunPosition, cameraPosition)\r\n            setExplosionPosition(sunPosition)\r\n            setCameraPosition(cameraPosition);\r\n            setOpacity({opacity: 0, onRest: () => changeRenderedScene('explosion')});\r\n            changeRenderedScene('landscape & explosion');\r\n        }\r\n    }, [scenes])\r\n\r\n    const render = useCallback(() => {\r\n        const theta = Math.PI * (-0.002 - 0.048 * scrolled.current);\r\n        const phi = 2 * Math.PI * (-.25);\r\n        const sunPosition = [\r\n            225000 * Math.cos(phi),\r\n            2500 + 200000 * scrolled.current,\r\n            225000 * Math.sin(phi) * Math.cos(theta)\r\n        ];\r\n        material.current.uniforms.turbidity.value = 13 - scrolled.current * 12;\r\n        material.current.uniforms.rayleigh.value = 1.2 - scrolled.current * 1.19;\r\n        material.current.uniforms.mieCoefficient.value = 0.1 - scrolled.current * 0.09997;\r\n        material.current.uniforms.mieDirectionalG.value = 0.58 - 0.1 * scrolled.current;\r\n        material.current.uniforms.sunPosition.value = sunPosition;\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        render()\r\n    }, []);\r\n\r\n    useFrame(() => {\r\n        render();\r\n    });\r\n\r\n    return (\r\n        <>\r\n            <mesh>\r\n                <boxBufferGeometry attach=\"geometry\" args={[450000, 450000, 450000]}/>\r\n                <animated.shaderMaterial ref={material} attach=\"material\" args={[SkyShader]} side={THREE.BackSide}\r\n                                         uniforms-opacity-value={opacity} />\r\n            </mesh>\r\n        </>\r\n    )\r\n};\r\nexport default LandscapeSky","import React, {useEffect, useLayoutEffect, useMemo, useRef} from 'react';\r\nimport {\r\n    EffectComposer,\r\n    EffectPass,\r\n    RenderPass,\r\n    GodRaysEffect,\r\n    SMAAEffect,\r\n    KernelSize,\r\n    BloomEffect\r\n    // @ts-ignore\r\n} from 'postprocessing'\r\nimport {useFrame, useThree} from \"react-three-fiber\";\r\nimport * as THREE from 'three';\r\n\r\nconst NewSun: React.FC = () => {\r\n\r\n    const sun = useRef(new THREE.Mesh());\r\n\r\n    const {gl, scene, camera, size} = useThree()\r\n    const composer = useMemo(() => {\r\n        const composer = new EffectComposer(gl);\r\n        composer.addPass(new RenderPass(scene, camera));\r\n        console.log('render')\r\n        return composer;\r\n    }, [camera, gl, scene]);\r\n\r\n    useLayoutEffect(() => {\r\n        const godRays = new GodRaysEffect(\r\n            camera, sun.current, {\r\n                height: 480,\r\n                kernelSize: KernelSize.SMALL,\r\n                density: 0.96,\r\n                decay: 0.92,\r\n                weight: 0.3,\r\n                exposure: 0.54,\r\n                samples: 60,\r\n            });\r\n        let areaImage = new Image();\r\n        areaImage.src = SMAAEffect.areaImageDataURL;\r\n        let searchImage = new Image();\r\n        searchImage.src = SMAAEffect.searchImageDataURL;\r\n        let smaaEffect = new SMAAEffect(searchImage,areaImage,1);\r\n        const effectPass = new EffectPass(camera, smaaEffect, godRays);\r\n        effectPass.renderToScreen = true;\r\n        composer.addPass(effectPass);\r\n    }, [camera, gl, scene])\r\n\r\n    useEffect(() => void composer.setSize(size.width, size.height), [composer, size]);\r\n\r\n    useFrame((_, delta) => composer.render(delta), 1)\r\n\r\n    return (\r\n        <group position={[0, 0, -40]}>\r\n            <pointLight args={[0xffccaa, 3, 20]}/>\r\n            <mesh ref={sun}>\r\n                <meshBasicMaterial attach='material' color={0xffccaa} transparent={true}/>\r\n                <sphereBufferGeometry attach='geometry' args={[5, 32, 32]}/>\r\n            </mesh>\r\n        </group>\r\n    )\r\n}\r\n\r\nexport default NewSun","import React, {Suspense, useCallback, useEffect, useLayoutEffect, useState} from 'react';\r\nimport Model from \"./Explosion/Model\";\r\nimport Stars from \"./stars\";\r\nimport {useStore} from \"../../utils/zustandStore\";\r\nimport MainCamera from \"./MainCamera\";\r\nimport Trackball from \"../controls/trackballControls\";\r\nimport {useSpring, animated} from \"react-spring/three\";\r\nimport Land from './Landscape/Land';\r\nimport LandscapeSky from './Landscape/LandscapeSky';\r\nimport * as THREE from 'three';\r\nimport Controls from \"../controls/controls\";\r\nimport {useFrame, useThree} from \"react-three-fiber\";\r\nimport NewSun from \"./StarSystem/NewSun\";\r\nimport {Bloom} from \"./posteffects/Effects\";\r\nimport OldModel from \"./Explosion/oldModel\";\r\n\r\nconst TransitionsBetweenScenes: React.FC = () => {\r\n\r\n    const scenes = useStore(state => state.scenes);\r\n    const explosionPosition = useStore(state => state.explosionPosition);\r\n\r\n    const {scene, gl} = useThree();\r\n    useLayoutEffect(() => {\r\n        console.log(gl)\r\n    }, [])\r\n\r\n    const [renderedScene, setRenderedScene] = useState('landscape');\r\n    const changeRenderedScene = useCallback((scene) => {\r\n        setRenderedScene(scene)\r\n    }, []);\r\n\r\n    console.log(explosionPosition)\r\n    return (\r\n        <Suspense fallback={null}>\r\n            <group visible={renderedScene === 'landscape' || renderedScene === 'landscape & explosion'}>\r\n                <Land/>\r\n                <LandscapeSky changeRenderedScene={changeRenderedScene}/>\r\n            </group>\r\n            <group position={explosionPosition || undefined}\r\n                   visible={renderedScene === 'explosion' || renderedScene === 'landscape & explosion'}>\r\n                <Stars/>\r\n                <Model/>\r\n                <NewSun/>\r\n            </group>\r\n            <MainCamera/>\r\n        </Suspense>\r\n    )\r\n}\r\n\r\nexport default TransitionsBetweenScenes;","import React from 'react';\r\nimport {Canvas} from \"react-three-fiber\";\r\nimport * as THREE from \"three\";\r\nimport TransitionsBetweenScenes from \"./TransitionsBetweenScenes\";\r\n\r\nconst InitialCanvas = () => {\r\n\r\n    return (\r\n        <Canvas\r\n            style={{background: 'black'}}\r\n            shadowMap\r\n            onCreated={({scene}) => {\r\n                scene.background = new THREE.Color(0x333333);\r\n            }}\r\n            concurrent={true}>\r\n            {/*<ambientLight intensity={1} color={0xffffff}/>*/}\r\n            <fog attach=\"fog\" args={[0x333333, 10, 400]} />\r\n            <TransitionsBetweenScenes/>\r\n        </Canvas>\r\n    );\r\n};\r\n\r\nexport default InitialCanvas;","import React, {useEffect, useRef, useState} from 'react';\r\nimport styled from 'styled-components';\r\nimport {animated, useChain, useSprings, useTrail} from 'react-spring'\r\n\r\nconst NavScreen = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  color: white;\r\n  min-height: 100%;\r\n  min-width: 100%;\r\n  font-family: 'Poppins', sans-serif;\r\n  box-sizing: border-box;\r\n  z-index: 997;\r\n`;\r\n\r\nconst BackgroundWrappers = styled(animated.div)`\r\n  position: absolute;\r\n  background-color: rgb(20, 20, 20);\r\n  height: 100%;\r\n  will-change: width;\r\n`;\r\n\r\nconst WhiteStripes = styled(animated.div)`\r\n  position: absolute;\r\n  bottom: 0;\r\n  background-color: blanchedalmond;\r\n  width: 1px;\r\n  will-change: height;\r\n`;\r\n\r\nconst NavBar = styled.div`\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 70px;\r\n  transform: translateY(-50%);\r\n`;\r\n\r\nconst NavLink = styled(animated.div)`\r\n  position: relative;\r\n  font-weight: 300;\r\n  font-size: 50px;\r\n  margin-bottom: 10px;\r\n  will-change: top, opacity;\r\n`;\r\n\r\nconst Menu = styled.div`\r\n  position: absolute;\r\n  z-index: 999;\r\n  top: 20px;\r\n  right: 20px;\r\n  color: white;\r\n  font-size: 15px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n`;\r\n\r\nconst navBlocks = ['', '', '', '', ''];\r\nconst stripesBlock = ['', '', '', ''];\r\nconst navLinks = ['Home', 'Portfolio', 'About', 'Contacts'];\r\n\r\nconst Navigation = (props) => {\r\n\r\n    const [{innWidth, innHeight}, setWindowParameters] = useState({innWidth: window.innerWidth, innHeight: window.innerHeight});\r\n    const updateWindowDimensions = () => {\r\n        setWindowParameters({innWidth: window.innerWidth, innHeight: window.innerHeight});\r\n\r\n    };\r\n    useEffect(() => {\r\n        window.addEventListener('resize', updateWindowDimensions);\r\n        return () => {window.removeEventListener('resize', updateWindowDimensions)};\r\n    });\r\n\r\n    const [isMenuOpened, setState] = useState(true);\r\n\r\n    const switchNavMenuAfterAnimation = () => {\r\n        if (!isMenuOpened) {\r\n            props.switchNavMenu()\r\n        }\r\n    };\r\n\r\n    const config = {tension: 200,};\r\n    const backgroundAnimRef = useRef();\r\n    const backgroundAnim = useSprings(navBlocks.length, navBlocks.map((item, i) => ({\r\n        ref: backgroundAnimRef,\r\n        from: {width: `0px`, left: `${i * (innWidth / 5)}px`},\r\n        to: async (next) => {\r\n                await next({left: `${i * (innWidth / 5)}px`,\r\n                    width: isMenuOpened ? `${innWidth / 5 + 3}px` : `0px`,});\r\n                await switchNavMenuAfterAnimation();\r\n        },\r\n        config: config\r\n    })));\r\n\r\n    const stripesAnimRef = useRef();\r\n    const stripesAnim = useSprings(stripesBlock.length, stripesBlock.map((item, i) => ({\r\n        ref: stripesAnimRef,\r\n        from: {height: `0px`, left: `${(i + 1) * (innWidth / 5)}px`},\r\n        left: `${(i + 1) * (innWidth / 5)}px`,\r\n        height: isMenuOpened ? `${innHeight}px` : `0px`,\r\n        config: config\r\n    })));\r\n\r\n    const linksAppearingRef = useRef();\r\n    const linksAppearing = useTrail(navLinks.length, ({\r\n        ref: linksAppearingRef,\r\n        from: {opacity: 0, top: '-50px'},\r\n        opacity: isMenuOpened ? 1 : 0,\r\n        top: isMenuOpened ? '0' : '-50px',\r\n        config:config\r\n    }));\r\n\r\n    useChain(isMenuOpened ? ([backgroundAnimRef, stripesAnimRef, linksAppearingRef] ):\r\n        [linksAppearingRef, stripesAnimRef, backgroundAnimRef], isMenuOpened ? [0, 0.5, 0.7] : [0, 0.2, 0.8]);\r\n\r\n    return (\r\n        <NavScreen>\r\n            {backgroundAnim.map((animations, i) =>\r\n                <BackgroundWrappers key={i} style={animations} />\r\n            )}\r\n            {stripesAnim.map((animations, i) =>\r\n                <WhiteStripes key={i} style={animations} />\r\n            )}\r\n            <NavBar>\r\n                {linksAppearing.map((animations, i) =>\r\n                    <NavLink style={animations} key={i}>\r\n                        {navLinks[i]}\r\n                    </NavLink>\r\n                )}\r\n            </NavBar>\r\n            <Menu onClick={() => {setState(!isMenuOpened)}}>\r\n                Menu\r\n            </Menu>\r\n        </NavScreen>\r\n    )\r\n};\r\n\r\nexport default Navigation;","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport Navigation from \"./Navigation\";\r\n\r\nconst Logo = styled.div`\r\n  position: absolute;\r\n  z-index: 999;\r\n  top: 20px;\r\n  color: white;\r\n  left: 20px;\r\n  font-size: 50px;\r\n  font-family: \"Anders\";\r\n`;\r\n\r\nconst Menu = styled.div`\r\n  position: absolute;\r\n  z-index: 999;\r\n  top: 20px;\r\n  right: 20px;\r\n  color: white;\r\n  font-size: 15px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n`;\r\n\r\nconst MenuDotsWrapper = styled.div`\r\n  width: 35px;\r\n  height: 17px;\r\n  position: relative;\r\n  margin-left: 15px;\r\n  cursor: pointer;\r\n `;\r\n\r\nconst MenuDots = styled.div`\r\n  width: 5px;\r\n  height: 5px;\r\n  border-radius: 5px;\r\n  background-color: white;\r\n  position: absolute;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  &:nth-child(1) {\r\n    left: 0\r\n  };\r\n  &:nth-child(2) {\r\n    left: 10px;\r\n  };\r\n  &:nth-child(3) {\r\n    left: 20px;\r\n  }\r\n`;\r\n\r\n\r\nconst Header = (props) => {\r\n\r\n    const onMenuClickHandler = () => {\r\n        if (!props.isNavMenuOpened) {\r\n            props.switchNavMenu();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Logo>\r\n                Horbatov\r\n            </Logo>\r\n            {!props.isNavMenuOpened &&\r\n            <Menu>\r\n                Menu\r\n                <MenuDotsWrapper onClick={onMenuClickHandler}>\r\n                    <MenuDots/>\r\n                    <MenuDots/>\r\n                    <MenuDots/>\r\n                </MenuDotsWrapper>\r\n            </Menu>}\r\n            {props.isNavMenuOpened &&\r\n            <Navigation switchNavMenu={props.switchNavMenu}/>\r\n            }\r\n        </>\r\n    )\r\n};\r\n\r\nexport default Header;","import React from 'react';\r\nimport styled from \"styled-components/macro\";\r\nimport {useStore} from \"../../utils/zustandStore\";\r\n\r\nconst ButtonsWrapper = styled.div`\r\n  position: absolute;\r\n  top: 200px;\r\n  left: 200px;\r\n  z-index: 1000;\r\n`;\r\n\r\nconst Button = styled.div<{ $color: string }>`\r\n  width: 50px;\r\n  height: 50px;\r\n  background-color: ${props => props.$color};\r\n`;\r\n\r\nconst TestButton = () => {\r\n\r\n    const setCurrentScene = useStore(state => state.setCurrentScene);\r\n    const setExploded = useStore(state => state.setExploded);\r\n    const test = () => {\r\n        setCurrentScene({currentScene: 'explosion', previousScene: 'landscape'})\r\n    }\r\n\r\n    const setProgress = () => {\r\n        setExploded(true)\r\n    }\r\n\r\n    return (\r\n        <ButtonsWrapper>\r\n            <Button onClick={test} $color={'red'}/>\r\n            <Button onClick={setProgress} $color={'green'}/>\r\n        </ButtonsWrapper>\r\n    )\r\n}\r\n\r\nexport default TestButton","import React, {useEffect, useState} from 'react';\nimport {createGlobalStyle} from \"styled-components\";\nimport styled from \"styled-components\";\nimport InitialCanvas from \"./components/ThreeJSComponents/InitialCanvas\";\nimport Header from \"./components/HTMLComponents/NavMenu/Header\";\nimport {getState} from \"./utils/zustandStore\";\nimport TestButton from \"./components/HTMLComponents/test\";\n\n\nconst GlobalStyles = createGlobalStyle`\n    * {\n      box-sizing: border-box;\n    };\n    body {\n      margin: 0;\n      padding: 0;\n      user-select: none;\n      outline: none;\n      \n    };\n   /* &::-webkit-scrollbar { \n    display: none;\n    };\n    html {\n    -ms-overflow-style: none; \n    scrollbar-width: none; \n    scrollbar-height: none; \n    }*/\n`;\n\nconst Wrapper = styled.div`\n    width: 100vw;\n    height: 100vh;\n    position: absolute;\n    z-index: -1;\n`;\n\nconst App = () => {\n\n  const [isNavMenuOpened, openAndCloseNavMenu] = useState(false);\n  const switchNavMenu = () => {\n    openAndCloseNavMenu(!isNavMenuOpened)\n  };\n  /*const onScrollHandler = (e, ref) => {\n      let scrolled = window.scrollY / (ref.current.scrollHeight - window.innerHeight);\n      getState().scroll(scrolled);\n  };*/\n\n  useEffect(() => {\n    const onMouseMoveHandler = (e:  MouseEvent)  => {\n      getState().mouseMove([e.clientX, e.clientY])\n    }\n    window.addEventListener('mousemove',onMouseMoveHandler);\n    return(() => window.removeEventListener('mousemove',onMouseMoveHandler))\n  }, []);\n\n  return (\n      <>\n        <GlobalStyles/>\n        <Wrapper>\n          <TestButton/>\n          <InitialCanvas/>\n        </Wrapper>\n        <Header switchNavMenu={switchNavMenu} isNavMenuOpened={isNavMenuOpened}/>\n      </>\n  );\n};\n\nexport default App;\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './App.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}